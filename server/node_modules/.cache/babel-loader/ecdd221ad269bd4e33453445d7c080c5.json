{"ast":null,"code":"import _toConsumableArray from\"D:/Coding Archive/Git Repo/PrivateProject/prj05/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"D:/Coding Archive/Git Repo/PrivateProject/prj05/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import React,{useContext,useState}from'react';import{myContext}from'../App';import'../style/Callapi.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Callapi=function Callapi(){var contextApi=useContext(myContext);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),apiData=_useState2[0],setApiData=_useState2[1];var key={apiKey:'G35VFKA-45P4RYK-N6JZ4TA-NJCBNA1',uuid:'80cbb7cd-216c-4c7a-a9a5-f269ac98baa8'};var numOfRows=12;var pageNo=1;var callAPIAction=function callAPIAction(){axios.post('prj05/api/call/',{apiKey:key.apiKey,uuid:key.uuid,numOfRows:numOfRows,pageNo:pageNo}).then(function(res){var newData=[];res.data.datas.response.body.items.forEach(function(element){newData.push(element);});setApiData(function(oldData){return[].concat(_toConsumableArray(oldData),newData);});}).catch(function(err){console.log(err);});};var handleScrollCharacter=function handleScrollCharacter(event){if(window.innerHeight+event.target.documentElement.scrollTop+1>=event.target.documentElement.scrollHeight){pageNo++;callAPIAction();}};React.useEffect(function(){// 로그인 검증 실시.\ncontextApi.loginCheck();if(!contextApi.loginStatus){// console.log(\"회원정보 검증이 실패하였습니다.\");\n}window.addEventListener('scroll',handleScrollCharacter);},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"capi-pagebackground setcenter\",children:/*#__PURE__*/_jsx(\"div\",{className:\"capi-pageinner setcenter\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"capi-capiarea setcenter gifont\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"capi-sidebar\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"API \\uD638\\uCD9C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"capi-sideutil\",children:contextApi.loginStatus?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{className:\"capi-callbtu gifont\",onClick:callAPIAction,children:/*#__PURE__*/_jsx(\"h3\",{children:\"\\uB370\\uC774\\uD130 \\uBC1B\\uC544\\uC624\\uAE30\"})})}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{className:\"capi-callbtu gifont\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"\\uC0AC\\uC6A9\\uBD88\\uAC00\"})})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"capi-contents\",children:/*#__PURE__*/_jsx(\"div\",{className:\"capi-showapi\",children:contextApi.loginStatus?/*#__PURE__*/_jsx(_Fragment,{children:apiData===''?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"capi-loading\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\uACF5\\uACF5\\uB370\\uC774\\uD130 API \\uD638\\uCD9C\\uD558\\uC5EC \\uB370\\uC774\\uD130 \\uCD9C\\uB825\\uD558\\uAE30\"})})}):/*#__PURE__*/_jsx(_Fragment,{children:apiData&&apiData.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{className:\"capi-datablock\",children:[\"\\uC2DD\\uBCC4\\uBC88\\uD638 : \",item.sn,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"\\uC9C0\\uC5ED\\uBA85 : \",item.districtName,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"\\uAD8C\\uC5ED\\uBA85 : \",item.moveName,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"\\uC624\\uC5FC\\uC218\\uCE58 : \",item.issueVal,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"\\uACBD\\uBCF4\\uC218\\uC900 : \",item.issueGbn,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"hr\",{})]},item.sn);})})}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"capi-loading\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\uBCF8 \\uAE30\\uB2A5\\uC740 \\uD68C\\uC6D0\\uC804\\uC6A9\\uC785\\uB2C8\\uB2E4.\"})})})})})]})})})});};export default Callapi;","map":{"version":3,"names":["axios","React","useContext","useState","myContext","Callapi","contextApi","apiData","setApiData","key","apiKey","uuid","numOfRows","pageNo","callAPIAction","post","then","res","newData","data","datas","response","body","items","forEach","element","push","oldData","catch","err","console","log","handleScrollCharacter","event","window","innerHeight","target","documentElement","scrollTop","scrollHeight","useEffect","loginCheck","loginStatus","addEventListener","map","item","sn","districtName","moveName","issueVal","issueGbn"],"sources":["D:/Coding Archive/Git Repo/PrivateProject/prj05/client/src/pages/callapi.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useContext, useState } from 'react';\r\n\r\nimport { myContext } from '../App';\r\n\r\nimport '../style/Callapi.css';\r\n\r\nconst Callapi = () => {\r\n    const contextApi = useContext(myContext);\r\n\r\n    const [apiData, setApiData] = useState('');\r\n\r\n    const key = { \r\n        apiKey: 'G35VFKA-45P4RYK-N6JZ4TA-NJCBNA1',\r\n        uuid: '80cbb7cd-216c-4c7a-a9a5-f269ac98baa8'\r\n    };\r\n\r\n    let numOfRows = 12;\r\n    let pageNo = 1;\r\n\r\n    const callAPIAction = () => {\r\n        axios.post('prj05/api/call/', {\r\n            apiKey: key.apiKey,\r\n            uuid: key.uuid,\r\n            numOfRows: numOfRows,\r\n            pageNo: pageNo\r\n        })\r\n        .then(res => {\r\n            const newData = [];\r\n            res.data.datas.response.body.items.forEach(element => { newData.push(element); });\r\n            setApiData((oldData => [...oldData, ...newData]));\r\n\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        })\r\n    }\r\n\r\n    const handleScrollCharacter = (event) => {\r\n        if (window.innerHeight + event.target.documentElement.scrollTop + 1 >= event.target.documentElement.scrollHeight) {\r\n            pageNo++;\r\n            callAPIAction();\r\n        }\r\n    };\r\n\r\n    React.useEffect(() => {\r\n        // 로그인 검증 실시.\r\n        contextApi.loginCheck();\r\n\r\n        if(!contextApi.loginStatus) {\r\n            // console.log(\"회원정보 검증이 실패하였습니다.\");\r\n        }\r\n\r\n        window.addEventListener('scroll', handleScrollCharacter);\r\n    }, []);\r\n\r\n\treturn (\r\n        <>\r\n            <div className='capi-pagebackground setcenter'>\r\n                <div className='capi-pageinner setcenter'>\r\n                    <div className='capi-capiarea setcenter gifont'>\r\n                        <div className='capi-sidebar'>\r\n                            <h1>API 호출</h1>\r\n                            <div className='capi-sideutil'>\r\n                            {contextApi.loginStatus ?\r\n                                <>\r\n                                    <button className='capi-callbtu gifont' onClick={callAPIAction}><h3>데이터 받아오기</h3></button>\r\n                                </>\r\n                                :\r\n                                <>\r\n                                    <button className='capi-callbtu gifont'><h3>사용불가</h3></button>\r\n                                </>\r\n                            }\r\n                            </div>\r\n                        </div>\r\n                        <div className='capi-contents'>\r\n                            <div className='capi-showapi'>\r\n                                {contextApi.loginStatus ?\r\n                                <>\r\n                                    {apiData === '' ?\r\n                                    <>\r\n                                        <div className='capi-loading'>\r\n                                            <h1>공공데이터 API 호출하여 데이터 출력하기</h1>\r\n                                        </div>\r\n                                    </>\r\n                                    :\r\n                                    <>\r\n                                        {apiData && apiData.map(item => {\r\n                                            return (\r\n                                                <div className='capi-datablock' key={item.sn}>\r\n                                                    식별번호 : {item.sn} <br/>\r\n                                                    지역명 : {item.districtName} <br/>\r\n                                                    권역명 : {item.moveName} <br/>\r\n                                                    오염수치 : {item.issueVal} <br/>\r\n                                                    경보수준 : {item.issueGbn} <br/><hr/>\r\n                                                </div>\r\n                                            )\r\n                                        })}\r\n                                    </>    \r\n                                    }\r\n                                </>\r\n                                :\r\n                                <>\r\n                                    <div className='capi-loading'>\r\n                                        <h1>본 기능은 회원전용입니다.</h1>\r\n                                    </div>\r\n                                </>\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Callapi;"],"mappings":"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"},"metadata":{},"sourceType":"module"}