{"ast":null,"code":"import _slicedToArray from\"D:/Coding Archive/Git Repo/PrivateProject/prj05/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useMemo,useState}from'react';import{myContext}from'../App';import axios from'axios';import'../style/Board.css';import'../style/GlobalStyle.css';import BoardWrite from'../components/boardwrite';import BoardList from'../components/boardlist';import Pagination from'../components/pagination';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Board=function Board(){var _boarddata$datas,_boarddata$datas2;var contextApi=useContext(myContext);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),boarddata=_useState2[0],setBoarddata=_useState2[1];var _useState3=useState('list'),_useState4=_slicedToArray(_useState3,2),componentvalue=_useState4[0],setComponentvalue=_useState4[1];React.useEffect(function(){axios.get('/prj05/board/select').then(function(res){setBoarddata(res.data);// console.log(res.data.datas);\n});},[]);var setTimeinfo=useMemo(function(e){var today=new Date();var time={year:today.getFullYear(),//현재 년도\nmonth:today.getMonth()+1,// 현재 월\ndate:today.getDate()// 현제 날짜\n// hours: today.getHours(), //현재 시간\n// minutes: today.getMinutes(), //현재 분\n};var timestring=\"\".concat(time.year,\"\\uB144 \").concat(time.month,\"\\uC6D4 \").concat(time.date,\"\\uC77C\");return timestring;},[]);var showboardlist=function showboardlist(){setComponentvalue('list');};var showboardcreate=function showboardcreate(){setComponentvalue('create');};// 페이지네이션 로직\n// 페이지네이션 로직\n// 현재 페이지를 제어할 변수 (가장 처음으로 보여질 페이지)\nvar _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];// 페이지 당 요소 갯수를 제어할 변수\nvar _useState7=useState(7),_useState8=_slicedToArray(_useState7,1),postPerPage=_useState8[0];// Get current posts\nvar indexOfLastPost=currentPage*postPerPage;var indexOfFirstPost=indexOfLastPost-postPerPage;var currentPosts=(_boarddata$datas=boarddata.datas)===null||_boarddata$datas===void 0?void 0:_boarddata$datas.slice(indexOfFirstPost,indexOfLastPost);// Change page\nvar paginate=function paginate(pageNumber){return setCurrentPage(pageNumber);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"bod-pagebackground setcenter\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bod-pageinner setcenter\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bod-bodarea setcenter gifont\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bod-sidebar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bod-sidetitle\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\uC790\\uC720\\uAC8C\\uC2DC\\uD310\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bod-sideutil\",children:[contextApi.loginStatus?/*#__PURE__*/_jsx(\"h2\",{children:contextApi.whoIsLogin}):/*#__PURE__*/_jsx(\"h2\",{children:\"\\uC775\\uBA85(\\uBE44\\uB85C\\uADF8\\uC778)\"}),/*#__PURE__*/_jsx(\"h3\",{children:setTimeinfo})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bod-sidebtu\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bod-changebtu gifont\",onClick:showboardlist,children:\"\\uAE00 \\uBAA9\\uB85D \\uBCF4\\uAE30\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bod-changebtu gifont\",onClick:showboardcreate,children:\"\\uAE00 \\uC4F0\\uAE30\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bod-contents\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bod-addbod\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bod-contents-boarddes\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bod-contents-boarddesnumber bod-conts-boddespubcss\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"\\uAE00\\uBC88\\uD638\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"bod-contents-boarddestitle bod-conts-boddespubcss\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"\\uC81C\\uBAA9\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"bod-contents-boarddeswriter bod-conts-boddespubcss\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"\\uC791\\uC131\\uC790\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"bod-contents-boarddeswritetime bod-conts-boddespubcss\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"\\uC791\\uC131\\uC2DC\\uAC04\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bod-showbod\",children:componentvalue==='list'?/*#__PURE__*/_jsx(BoardList,{boarddata:currentPosts}):/*#__PURE__*/_jsx(BoardWrite,{whoLogin:contextApi.whoIsLogin})}),/*#__PURE__*/_jsx(\"div\",{className:\"bod-pagenation\",children:/*#__PURE__*/_jsx(Pagination,{postsPerPage:postPerPage,totalPosts:(_boarddata$datas2=boarddata.datas)===null||_boarddata$datas2===void 0?void 0:_boarddata$datas2.length,paginate:paginate})})]})]})})})});};export default Board;","map":{"version":3,"names":["React","useContext","useMemo","useState","myContext","axios","BoardWrite","BoardList","Pagination","Board","contextApi","boarddata","setBoarddata","componentvalue","setComponentvalue","useEffect","get","then","res","data","setTimeinfo","e","today","Date","time","year","getFullYear","month","getMonth","date","getDate","timestring","showboardlist","showboardcreate","currentPage","setCurrentPage","postPerPage","indexOfLastPost","indexOfFirstPost","currentPosts","datas","slice","paginate","pageNumber","loginStatus","whoIsLogin","length"],"sources":["D:/Coding Archive/Git Repo/PrivateProject/prj05/client/src/pages/board.js"],"sourcesContent":["import React, { useContext, useMemo, useState } from 'react';\r\nimport { myContext } from '../App';\r\nimport axios from 'axios';\r\n\r\nimport '../style/Board.css';\r\nimport '../style/GlobalStyle.css';\r\n\r\nimport BoardWrite from '../components/boardwrite';\r\nimport BoardList from '../components/boardlist';\r\nimport Pagination from '../components/pagination';\r\n\r\nconst Board = () => {\r\n    const contextApi = useContext(myContext);\r\n\r\n    const [boarddata, setBoarddata] = useState([]);\r\n    const [componentvalue, setComponentvalue] = useState('list');\r\n\r\n    React.useEffect(() => {\r\n        axios\r\n        .get('/prj05/board/select')\r\n        .then(res => {\r\n            setBoarddata(res.data);\r\n            // console.log(res.data.datas);\r\n        });\r\n    }, [])\r\n\r\n    const setTimeinfo = useMemo(e => {\r\n        let today = new Date();\r\n\r\n        let time = {\r\n            year: today.getFullYear(),  //현재 년도\r\n            month: today.getMonth() + 1, // 현재 월\r\n            date: today.getDate(), // 현제 날짜\r\n            // hours: today.getHours(), //현재 시간\r\n            // minutes: today.getMinutes(), //현재 분\r\n        };\r\n    \r\n        let timestring = `${time.year}년 ${time.month}월 ${time.date}일`;\r\n\r\n        return timestring;\r\n    }, []);\r\n\r\n    const showboardlist = () => {\r\n        setComponentvalue('list');\r\n    };\r\n\r\n    const showboardcreate = () => {\r\n        setComponentvalue('create');\r\n    };\r\n\r\n    // 페이지네이션 로직\r\n    // 페이지네이션 로직\r\n\r\n    // 현재 페이지를 제어할 변수 (가장 처음으로 보여질 페이지)\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    // 페이지 당 요소 갯수를 제어할 변수\r\n    const [postPerPage] = useState(7);\r\n\r\n    // Get current posts\r\n    const indexOfLastPost = currentPage * postPerPage;\r\n    const indexOfFirstPost = indexOfLastPost - postPerPage;\r\n    const currentPosts = boarddata.datas?.slice(indexOfFirstPost, indexOfLastPost);\r\n\r\n    // Change page\r\n    const paginate = pageNumber => setCurrentPage(pageNumber);\r\n\r\n    return (\r\n        <>\r\n                <div className='bod-pagebackground setcenter'>\r\n                    <div className='bod-pageinner setcenter'>\r\n                        <div className='bod-bodarea setcenter gifont'>\r\n\r\n                            <div className='bod-sidebar'>\r\n\r\n                                <div className='bod-sidetitle'>\r\n                                    <h1>자유게시판</h1>\r\n                                </div>\r\n\r\n                                <div className='bod-sideutil'>\r\n                                    {contextApi.loginStatus ? \r\n                                        <h2>{contextApi.whoIsLogin}</h2>\r\n                                    :\r\n                                        <h2>익명(비로그인)</h2>\r\n                                    }\r\n\r\n                                    <h3>{setTimeinfo}</h3>\r\n                                </div>\r\n\r\n                                <div className='bod-sidebtu'>\r\n                                    <button className='bod-changebtu gifont' onClick={showboardlist}>글 목록 보기</button>\r\n                                    <button className='bod-changebtu gifont' onClick={showboardcreate}>글 쓰기</button>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div className='bod-contents'>\r\n                                <div className='bod-addbod'>\r\n                                    <div className='bod-contents-boarddes'>\r\n                                        <div className='bod-contents-boarddesnumber bod-conts-boddespubcss'>\r\n                                            <h3>글번호</h3>   \r\n                                        </div>\r\n                                        <div className='bod-contents-boarddestitle bod-conts-boddespubcss'>\r\n                                            <h3>제목</h3>\r\n                                        </div>\r\n                                        <div className='bod-contents-boarddeswriter bod-conts-boddespubcss'>\r\n                                            <h3>작성자</h3>\r\n                                        </div>\r\n                                        <div className='bod-contents-boarddeswritetime bod-conts-boddespubcss'>\r\n                                            <h3>작성시간</h3>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className='bod-showbod'>\r\n                                    {componentvalue === 'list' ? \r\n                                        <BoardList boarddata={currentPosts}/>\r\n                                    :\r\n                                        <BoardWrite whoLogin={contextApi.whoIsLogin}/>\r\n                                    }\r\n                                </div>\r\n                                <div className='bod-pagenation'>\r\n                                    <Pagination\r\n                                        postsPerPage={postPerPage}\r\n                                        totalPosts={boarddata.datas?.length}\r\n                                        paginate={paginate}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Board;"],"mappings":"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"},"metadata":{},"sourceType":"module"}